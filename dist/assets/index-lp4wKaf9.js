const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/accountService-BIsiLwEQ.js","assets/firebase-vendor-B4z9b8il.js","assets/animation-vendor-BD8Aa5RZ.js","assets/react-vendor-DtX1tuCI.js","assets/icons-vendor-BBBaSOmN.js","assets/HistoryDashboard-BdCz2DXq.js","assets/SettingsModal-DUMjVEjK.js","assets/ContactModal-CnuzhtX0.js"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,t=(t,a,r)=>((t,a,r)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r)(t,"symbol"!=typeof a?a+"":a,r);import{j as a,A as r,m as s}from"./animation-vendor-BD8Aa5RZ.js";import{a as n,r as o,R as i}from"./react-vendor-DtX1tuCI.js";import{i as l,g as d,G as c,a as u,c as h,q as m,o as g,b as x,d as p,e as y,f as b,s as f,h as w,j as v,k as j,l as k,m as N}from"./firebase-vendor-B4z9b8il.js";import{L as S,S as W,M as C,F as z,C as E,a as D,b as _,c as T,A as O,d as I,e as A,f as M,g as P,h as L,Z as H,B as R,H as U,i as $,j as G}from"./icons-vendor-BBBaSOmN.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var J={},F=n;J.createRoot=F.createRoot,J.hydrateRoot=F.hydrateRoot;const V={},Y=function(e,t,a){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),a=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));r=Promise.allSettled(t.map(e=>{if((e=function(e){return"/"+e}(e))in V)return;V[e]=!0;const t=e.endsWith(".css"),r=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${r}`))return;const s=document.createElement("link");return s.rel=t?"stylesheet":"modulepreload",t||(s.as="script"),s.crossOrigin="",s.href=e,a&&s.setAttribute("nonce",a),document.head.appendChild(s),t?new Promise((t,a)=>{s.addEventListener("load",t),s.addEventListener("error",()=>a(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function s(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(const e of t||[])"rejected"===e.status&&s(e.reason);return e().catch(s)})},q="dj_device_key_v1";async function B(){let e=localStorage.getItem(q);if(!e){const e=await window.crypto.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt","decrypt"]),t=await window.crypto.subtle.exportKey("jwk",e);return localStorage.setItem(q,JSON.stringify(t)),e}return window.crypto.subtle.importKey("jwk",JSON.parse(e),{name:"AES-GCM"},!0,["encrypt","decrypt"])}async function K(e){try{const t=await B(),a=window.crypto.getRandomValues(new Uint8Array(12)),r=(new TextEncoder).encode(e),s=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:a},t,r),n=new Uint8Array(s),o=new Uint8Array(a.length+n.length);o.set(a),o.set(n,a.length);let i="";const l=o.byteLength;for(let e=0;e<l;e++)i+=String.fromCharCode(o[e]);return btoa(i)}catch(t){return e}}async function Z(e){try{const t=await B(),a=atob(e),r=a.length,s=new Uint8Array(r);for(let e=0;e<r;e++)s[e]=a.charCodeAt(e);const n=s.slice(0,12),o=s.slice(12),i=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:n},t,o);return(new TextDecoder).decode(i)}catch(t){return""}}const Q=l({apiKey:"AIzaSyDfN8DoYPyJbVM3y3MWaFdz0mhrpqLFuZo",authDomain:"data-journaling.firebaseapp.com",projectId:"data-journaling",storageBucket:"data-journaling.firebasestorage.app",messagingSenderId:"738602468552",appId:"1:738602468552:web:abfffbe405bd8f3f1a11fd",measurementId:"G-QNHEJD6HV4"}),X=d(Q),ee=new c,te=u(Q),ae="data_journaling_entries_secure_v1",re="dj_manifest_v1",se="dj_entry_";async function ne(){const e=localStorage.getItem(re);if(!e)return[];try{const t=await Z(e);return JSON.parse(t)}catch{return[]}}async function oe(e){const t=await ne();if(!t.includes(e)){t.push(e),t.sort((e,t)=>t.localeCompare(e));const a=await K(JSON.stringify(t));localStorage.setItem(re,a)}}const ie=async e=>{const t=await ne();if(0!==t.length){for(const r of t){const t=localStorage.getItem(se+r);if(t)try{const a=await Z(t),s=JSON.parse(a);await f(p(te,"users",e,"entries",r),s),localStorage.removeItem(se+r)}catch(a){}}localStorage.removeItem(re)}},le=async()=>{const e=localStorage.getItem(ae);if(e)try{const t=await Z(e);if(!t)return;const a=JSON.parse(t);for(const e of a){const t=await K(JSON.stringify(e));localStorage.setItem(se+e.date,t),await oe(e.date)}localStorage.removeItem(ae)}catch(t){}},de=async e=>{const t=X.currentUser;if(t)try{const a=JSON.parse(JSON.stringify(e));await f(p(te,"users",t.uid,"entries",e.date),a)}catch(a){throw a}else try{const t=JSON.stringify(e),a=await K(t);localStorage.setItem(se+e.date,a),await oe(e.date)}catch(a){throw a}},ce=async e=>{const t=X.currentUser;if(t){const a=p(te,"users",t.uid,"entries",e),r=await y(a);return r.exists()?r.data():void 0}{const t=localStorage.getItem(se+e);if(!t)return;try{const e=await Z(t);return JSON.parse(e)}catch(a){return}}},ue=async()=>{const e=X.currentUser;if(e){const t=h(te,"users",e.uid,"entries"),a=m(t,g("date","desc")),r=await x(a),s=[];return r.forEach(e=>{s.push(e.data())}),s}{const e=(await ne()).map(async e=>await ce(e));return(await Promise.all(e)).filter(e=>void 0!==e).sort((e,t)=>t.timestamp-e.timestamp)}},he=async e=>{const t=X.currentUser;t?await b(p(te,"users",t.uid,"entries",e)):(await async function(e){const t=(await ne()).filter(t=>t!==e),a=await K(JSON.stringify(t));localStorage.setItem(re,a)}(e),localStorage.removeItem(se+e))},me=async()=>{let e=[];const t=X.currentUser;if(t){const a=h(te,"users",t.uid,"entries");(await x(a)).forEach(t=>e.push(t.id))}else e=await ne();if(0===e.length)return 0;const a=[...e].sort((e,t)=>t.localeCompare(e));let r=0;const s=new Date;s.setHours(0,0,0,0);const n=new Date(a[0]);n.setHours(0,0,0,0);const o=Math.abs(s.getTime()-n.getTime());if(Math.round(o/864e5)>1)return 0;r=1;for(let i=0;i<a.length-1;i++){const e=new Date(a[i]),t=new Date(a[i+1]);e.setHours(0,0,0,0),t.setHours(0,0,0,0);if(1!==Math.round((e.getTime()-t.getTime())/864e5))break;r++}return r},ge=Object.freeze(Object.defineProperty({__proto__:null,deleteEntry:he,getEntries:ue,getEntryByDate:ce,getStreak:me,migrateLocalToCloud:ie,runMigration:le,saveEntry:de},Symbol.toStringTag,{value:"Module"})),xe=o.createContext(void 0),pe=({children:e})=>{const[t,r]=o.useState(null),[s,n]=o.useState(!1),[i,l]=o.useState(!0),[d,c]=o.useState(!1),[u]=o.useState(!1),[h,m]=o.useState({transcriptionSeconds:0,aiSummaryCount:0});o.useEffect(()=>w(X,async e=>{e?(r(e),n(!1),await ie(e.uid),Y(()=>import("./accountService-BIsiLwEQ.js"),__vite__mapDeps([0,1,2,3,4])).then(async t=>{const a=await t.getUserUsage(e.uid);m(a)})):(r(null),m({transcriptionSeconds:0,aiSummaryCount:0})),l(!1)}),[]),o.useEffect(()=>{const e=localStorage.getItem("dj_theme");("dark"===e||!e&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&(c(!0),document.documentElement.classList.add("dark"))},[]);return a.jsx(xe.Provider,{value:{user:t,isGuest:s,loading:i,darkMode:d,isPro:u,usage:h,loginGoogle:async()=>{try{l(!0),await N(X,ee)}catch(e){throw l(!1),e}},loginEmail:async(e,t)=>{try{l(!0),await k(X,e,t)}catch(a){throw l(!1),a}},registerEmail:async(e,t)=>{try{l(!0),await j(X,e,t)}catch(a){throw l(!1),a}},loginGuest:()=>{n(!0)},logout:async()=>{try{await v(X),r(null),n(!1)}catch(e){}},toggleDarkMode:()=>{c(e=>{const t=!e;return t?(document.documentElement.classList.add("dark"),localStorage.setItem("dj_theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("dj_theme","light")),t})},incrementUsage:async e=>{t&&(m(t=>({...t,transcriptionSeconds:t.transcriptionSeconds+e})),Y(()=>import("./accountService-BIsiLwEQ.js"),__vite__mapDeps([0,1,2,3,4])).then(a=>{a.updateUserUsage(t.uid,e)}))}},children:e})},ye=()=>{const e=o.useContext(xe);if(!e)throw new Error("useAuth must be used within AuthProvider");return e},be=({value:e,onChange:t})=>a.jsxs("div",{className:"flex flex-col gap-2",children:[a.jsx("label",{className:"text-sm font-medium text-apple-gray dark:text-gray-400 uppercase tracking-wider text-[0.7rem]",children:"How was your day?"}),a.jsx("div",{className:"flex items-center justify-between gap-2",children:[{value:-2,label:"-2",color:"bg-red-100 text-red-600 border-red-200 hover:bg-red-200"},{value:-1,label:"-1",color:"bg-orange-100 text-orange-600 border-orange-200 hover:bg-orange-200"},{value:0,label:"0",color:"bg-gray-100 text-gray-600 border-gray-200 hover:bg-gray-200"},{value:1,label:"+1",color:"bg-green-100 text-green-600 border-green-200 hover:bg-green-200"},{value:2,label:"+2",color:"bg-emerald-100 text-emerald-600 border-emerald-200 hover:bg-emerald-200"}].map(r=>{const s=e===r.value;return a.jsx("button",{onClick:()=>t(r.value),className:`\n                flex-1 flex flex-col items-center justify-center p-3 rounded-xl border transition-all duration-200\n                ${s?`${r.color} ring-2 ring-offset-1 ring-offset-white dark:ring-offset-zinc-900 ring-gray-200 dark:ring-gray-700 scale-105 shadow-sm`:"bg-white dark:bg-zinc-800 border-gray-100 dark:border-zinc-700 text-gray-400 hover:bg-gray-50 dark:hover:bg-zinc-700/50 hover:scale-105"}\n              `,type:"button",children:a.jsx("span",{className:"text-lg font-bold",children:r.label})},r.value)})})]}),fe=({prompts:e,className:t})=>{const[n,i]=o.useState(0);return o.useEffect(()=>{const t=setInterval(()=>{i(t=>(t+1)%e.length)},5e3);return()=>clearInterval(t)},[e]),a.jsx("div",{className:`pointer-events-none absolute top-0 left-0 w-full h-full p-0 overflow-hidden ${t}`,children:a.jsx(r,{mode:"wait",children:a.jsx(s.span,{initial:{opacity:0},animate:{opacity:.3},exit:{opacity:0},transition:{duration:.4,ease:"easeInOut"},className:"block",children:e[n]},n)})})},we=({value:e,onChange:t,animatedPlaceholder:r,className:s=""})=>{const n=o.useRef(null);return o.useEffect(()=>{n.current&&(n.current.style.height="auto",n.current.style.height=n.current.scrollHeight+"px")},[e]),a.jsxs("div",{className:`relative w-full min-h-[100px] ${s}`,children:[!e&&r&&r.length>0&&a.jsx(fe,{prompts:r,className:"text-apple-gray/50 dark:text-zinc-500/50 text-base leading-relaxed pl-1 pt-1"}),a.jsx("textarea",{ref:n,value:e,onChange:e=>t(e.target.value),className:"w-full h-full bg-transparent border-none outline-none resize-none text-base leading-relaxed text-gray-800 dark:text-gray-100 placeholder-transparent focus:ring-0 p-1",spellCheck:!1})]})},ve=({onTranscriptionComplete:e})=>{const{isPro:t,usage:r,incrementUsage:s,isGuest:n}=ye(),[i,l]=o.useState(!1),[d,c]=o.useState(!1),u=o.useRef(null),h=o.useRef([]),m=o.useRef(0),g=async()=>{if(n)alert("âœ¨ Sign in to unlock voice journaling\n\nCreate a free account to start recording your thoughts with unlimited AI-powered transcription.");else if(!t&&r.transcriptionSeconds>=900)alert("ðŸŽ‰ You've explored 15 minutes of unlimited potential!\n\nReady to unlock more? Join the Inner Circle for unlimited voice journaling.");else try{const t=await navigator.mediaDevices.getUserMedia({audio:!0}),a=new MediaRecorder(t);u.current=a,h.current=[],m.current=Date.now(),a.ondataavailable=e=>{e.data.size>0&&h.current.push(e.data)},a.onstop=async()=>{const a=Math.round((Date.now()-m.current)/1e3),r=new Blob(h.current,{type:"audio/webm"});c(!0);try{const t=await(async e=>{try{const t=await e.arrayBuffer(),a=btoa(new Uint8Array(t).reduce((e,t)=>e+String.fromCharCode(t),"")),r=await fetch("https://us-central1-data-journaling.cloudfunctions.net/transcribeAudio",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({audioData:a})});if(!r.ok){const e=await r.json();throw new Error(e.error||"Transcription failed")}return(await r.json()).text||""}catch(t){throw new Error(`Transcription failed: ${(null==t?void 0:t.message)||"Unknown error"}`)}})(r);e(t),await s(a)}catch(n){alert("Transcription failed. Please check your connection or API key.")}finally{c(!1),t.getTracks().forEach(e=>e.stop())}},a.start(),l(!0)}catch(a){alert("Could not access microphone. Please allow permissions.")}};return a.jsx("button",{onClick:()=>{i?u.current&&i&&(u.current.stop(),l(!1)):g()},disabled:d,className:`\n        p-2 rounded-full transition-all duration-300 flex items-center justify-center\n        ${i?"bg-red-500 text-white shadow-lg scale-110 animate-pulse":d?"bg-blue-100 text-blue-500 cursor-wait":"bg-gray-100 dark:bg-zinc-800 text-gray-500 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-zinc-700"}\n      `,title:i?"Stop Recording":d?"Processing...":"Start Recording",children:d?a.jsx(S,{size:18,className:"animate-spin"}):i?a.jsx(W,{size:18,fill:"currentColor"}):a.jsx(C,{size:18})})},je=({size:e=24,status:t,className:r=""})=>a.jsxs("div",{className:`relative flex items-center justify-center ${r}`,children:[a.jsx(z,{size:e,className:`transition-all duration-500 ${(()=>{switch(t){case"burning":return"text-orange-500 fill-orange-500 drop-shadow-[0_0_8px_rgba(249,115,22,0.6)] animate-pulse";case"igniting":return"text-yellow-400 fill-yellow-400/50";default:return"text-gray-400 dark:text-gray-600"}})()}`}),"burning"===t&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"absolute inset-0 animate-ping opacity-20 blur-xl bg-orange-500 rounded-full scale-150"}),a.jsx("div",{className:"absolute inset-0 animate-pulse opacity-40 blur-md bg-orange-400 rounded-full scale-110"})]})]}),ke=({selectedDate:e,onSelectDate:t,entryDates:r,onClose:s})=>{const[n,i]=o.useState(new Date(e));return a.jsxs("div",{className:"bg-white dark:bg-zinc-800 rounded-2xl shadow-xl border border-gray-200 dark:border-zinc-700 p-4 w-[320px] animate-fade-in",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("button",{onClick:()=>{i(new Date(n.getFullYear(),n.getMonth()-1,1))},className:"p-1 hover:bg-gray-100 dark:hover:bg-zinc-700 rounded-full",children:a.jsx(E,{size:20,className:"text-gray-600 dark:text-gray-400"})}),a.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:n.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),a.jsx("button",{onClick:()=>{i(new Date(n.getFullYear(),n.getMonth()+1,1))},className:"p-1 hover:bg-gray-100 dark:hover:bg-zinc-700 rounded-full",children:a.jsx(D,{size:20,className:"text-gray-600 dark:text-gray-400"})})]}),a.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:["S","M","T","W","T","F","S"].map(e=>a.jsx("div",{className:"h-8 w-10 flex items-center justify-center text-xs font-medium text-gray-400",children:e},e))}),a.jsx("div",{className:"grid grid-cols-7 gap-1",children:(()=>{const s=[],o=(i=n,new Date(i.getFullYear(),i.getMonth()+1,0).getDate());var i;const l=(e=>new Date(e.getFullYear(),e.getMonth(),1).getDay())(n);for(let e=0;e<l;e++)s.push(a.jsx("div",{className:"h-10 w-10"},`empty-${e}`));for(let d=1;d<=o;d++){const o=new Date(n.getFullYear(),n.getMonth(),d),i=o.toISOString().split("T")[0],l=i===e,c=r.includes(i),u=(new Date).toDateString()===o.toDateString();s.push(a.jsxs("button",{onClick:()=>t(i),className:`\n            h-10 w-10 rounded-full flex items-center justify-center text-sm font-medium transition-all relative\n            ${l?"bg-blue-600 text-white shadow-md":"hover:bg-gray-100 dark:hover:bg-zinc-700 text-gray-700 dark:text-gray-300"}\n            ${u&&!l?"border border-blue-500 text-blue-500":""}\n          `,children:[d,c&&!l&&a.jsx("div",{className:"absolute bottom-1 w-1 h-1 bg-green-500 rounded-full"})]},d))}return s})()}),a.jsx("div",{className:"mt-4 pt-3 border-t border-gray-100 dark:border-zinc-700 flex justify-end",children:a.jsx("button",{onClick:s,className:"text-sm text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:"Close"})})]})},Ne=({isOpen:e,className:t=""})=>{const r=e?"opened":"closed";return a.jsxs("div",{className:`flex flex-col justify-center items-center w-6 h-6 gap-[10px] ${t}`,children:[a.jsx(s.span,{animate:r,variants:{closed:{rotate:0,translateY:0},opened:{rotate:45,translateY:6}},transition:{duration:.2,ease:"easeInOut"},className:"w-5 h-[2px] bg-current rounded-full origin-center block"}),a.jsx(s.span,{animate:r,variants:{closed:{rotate:0,translateY:0},opened:{rotate:-45,translateY:-6}},transition:{duration:.2,ease:"easeInOut"},className:"w-5 h-[2px] bg-current rounded-full origin-center block"})]})},Se=i.memo(({date:e,setDate:t,showCalendar:r,setShowCalendar:s,entryDates:n,onToggleSidebar:i,isSidebarOpen:l=!1,streakStatus:d,displayStreak:c})=>{const u=o.useCallback(()=>{null==i||i()},[i]),h=o.useCallback(()=>{s(!r)},[r,s]),m=o.useCallback(e=>{t(e),s(!1)},[t,s]),g=o.useCallback(()=>{s(!1)},[s]);return a.jsx(a.Fragment,{children:a.jsx("header",{className:"h-[var(--header-height)] border-b border-apple-border/60 dark:border-white/10 animate-slide-in-from-bottom bg-apple-bg/80 dark:bg-zinc-900/80 backdrop-blur-md sticky top-0 z-30 transition-all duration-300",style:{animationDelay:"0.1s"},children:a.jsxs("div",{className:"mx-auto max-w-[var(--card-max-width)] px-3 md:px-[var(--space-l)] h-full flex items-center gap-4",children:[a.jsx("button",{onClick:u,className:"p-1.5 -ml-1 text-apple-gray dark:text-zinc-400 hover:bg-gray-100 dark:hover:bg-zinc-800 rounded-lg transition-colors active:scale-95 min-w-[36px] min-h-[36px] flex items-center justify-center group md:hidden lg:hidden","aria-label":"Toggle sidebar",children:a.jsx(Ne,{isOpen:l,className:"scale-90"})}),a.jsx("div",{className:"flex-1 flex items-center min-w-0 pt-0.5 ml-1 md:ml-0",children:a.jsxs("button",{onClick:h,className:"group flex items-center gap-1.5 md:gap-2 text-left hover:opacity-80 transition-opacity min-w-0",children:[a.jsx("h1",{className:"text-lg md:text-[length:var(--font-xl)] font-bold text-apple-text dark:text-white tracking-tight leading-none truncate",children:new Date(e).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}),a.jsx(_,{className:"w-4 h-4 md:w-6 md:h-6 text-gray-400 transition-transform duration-300 flex-shrink-0 "+(r?"rotate-180":"")})]})}),a.jsx("div",{className:"flex items-center gap-2 ml-auto flex-shrink-0 pl-2",children:a.jsxs("div",{className:"\n                  inline-flex items-center justify-center \n                  h-[36px] lg:h-[48px] \n                  px-2.5 rounded-full \n                  bg-gradient-to-b from-[#2a1f1a] to-[#34221c] \n                  border border-white/5 \n                  shadow-[0_6px_18px_rgba(0,0,0,0.45)]\n                  text-white\n                ","aria-label":`Streak ${c}`,children:[a.jsx(je,{size:20,status:d,className:"lg:w-5 lg:h-5"}),a.jsx("span",{className:"text-sm lg:text-[1rem] font-medium ml-1.5",children:c})]})}),r&&a.jsxs("div",{className:"absolute top-full left-0 mt-2 z-50 px-[var(--space-l)] w-full flex justify-center md:justify-start",children:[a.jsx("div",{className:"fixed inset-0 z-40",onClick:g}),a.jsx("div",{className:"relative z-50",children:a.jsx(ke,{selectedDate:e,onSelectDate:m,entryDates:n,onClose:g})})]})]})})})}),We=["Did you make a difficult decision today?","What is the cost of your current inaction?","What are you tolerating that you shouldn't be?","Who did you help today, and how?","What is one thing you learned today?","If you could live today over again, what would you do differently?","What made you smile today?","What are you grateful for right now?","What is a fear you overcame recently?","How did you take care of yourself today?","What is the most important task for tomorrow?","Who are you trying to impress, and why?","What would you do if you knew you couldn't fail?","What is a habit you want to break?","What is a habit you want to build?","How are you feeling physically right now?","How are you feeling emotionally right now?","What is draining your energy?","What gives you energy?","Who inspires you?","What is a dream you haven't pursued yet?","What does success look like to you?","What is a mistake you made recently, and what did you learn?","What is a compliment you received recently?","What is a compliment you gave recently?","What are you looking forward to?","What is holding you back?","How do you define happiness?","What is your biggest strength?","What is your biggest weakness?","What is a book that changed your life?","What is a song that moves you?","What is a movie that impacted you?","What is a place you want to visit?","Who do you miss?","What is a relationship you want to improve?","What is a boundary you need to set?","What is a risk you need to take?","What is a skill you want to learn?","What is a project you want to start?","What is a clutter you need to clear?","What is a conversation you need to have?","What is a belief that limits you?","What is a value you live by?","What is a memory you cherish?","What is a lesson your parents taught you?","What is a piece of advice you would give your younger self?","What is a goal you achieved recently?","What is a challenge you are facing?","How do you handle stress?","What makes you feel loved?","What makes you feel safe?","What makes you feel powerful?","What makes you feel vulnerable?","What is a lie you tell yourself?","What is the truth you need to hear?","What are you avoiding?","What are you procrastinating on?","What is a small win from today?","What is a big win from this week?","What is something you are proud of?","What is something you are ashamed of?","How can you be kinder to yourself?","How can you be kinder to others?","What does your ideal day look like?","What does your ideal life look like?","What is stopping you from living your ideal life?","What is one step you can take today towards your dreams?","Who supports you?","Who drains you?","What is a toxic pattern you need to break?","What is a healthy pattern you want to reinforce?","What is your definition of love?","What is your definition of freedom?","What is your definition of peace?","What is your definition of wealth?","What are you curious about?","What surprises you?","What bores you?","What excites you?","What angers you?","What saddens you?","What confuses you?","What clarifies things for you?","What is a question you want answered?","What is a problem you want to solve?","What is a cause you care about?","What is a legacy you want to leave?","How do you want to be remembered?","What is the meaning of life for you?","Are you living in alignment with your values?","What needs to change?","What needs to stay the same?","What are you waiting for?","Is today a good day to start?","What if it all works out?","What if you are enough?","What if you are exactly where you need to be?","What is the most beautiful thing you saw today?","What is the kindest thing someone did for you today?","What is the bravest thing you did today?","What is the most honest thing you said today?","What is the most creative thing you did today?","What is the most productive thing you did today?","What is the most relaxing thing you did today?","What is the most fun thing you did today?","What is the most interesting thing you read today?","What is the most inspiring thing you heard today?"],Ce=["What are you tolerating?","How is your energy right now?","What is the dominant emotion you feel?","Why do you think you feel this way?","What triggered your mood today?","Are you reacting or responding?","What is your body trying to tell you?","Where do you feel tension in your body?","What is draining your mental space?","What is feeding your soul?","Are you being honest with yourself?","What are you avoiding feeling?","What would make you feel better?","Is this feeling permanent or temporary?","What can you learn from this emotion?","How would you rate your stress level?","How would you rate your focus?","What is one thing you can let go of?","What is one thing you can embrace?","Are you being kind to yourself?"],ze=["What is the cost of inaction?","What is the next logical step?","What is the worst that could happen?","What is the best that could happen?","Who can help you with this?","What resources do you need?","What is a small step you can take now?","What is a bold move you can make?","How can you simplify this?","What is the 80/20 of this situation?","What would your mentor do?","What is the long-term impact of this?","How does this align with your goals?","What are the alternatives?","What is the timeline?","How will you measure success?","What is the obstacle in the way?","How can you remove the obstacle?","What is the opportunity here?","What is your intuition telling you?"],Ee=({initialDate:e,onSave:t,onToggleSidebar:r,isSidebarOpen:s,streak:n=0})=>{const{isGuest:i}=ye(),[l,d]=o.useState(e),[c,u]=o.useState(""),[h,m]=o.useState(null),[g,x]=o.useState(""),[p,y]=o.useState(""),[b,f]=o.useState(void 0),[w,v]=o.useState([]),[j,k]=o.useState("saved"),[N,S]=o.useState(!0),[W,C]=o.useState(!1),[z,E]=o.useState([]),[D,_]=o.useState("burning"),[T,O]=o.useState(n);o.useEffect(()=>{O(n)},[n]),o.useEffect(()=>{(async()=>{S(!0);const t=await ce(e),a=new Date(e).toDateString()===(new Date).toDateString(),r=t&&(t.narrative||t.rating||t.reasoning||t.planForTomorrow);_(a&&!r?"unlit":"burning"),t?(u(t.narrative),m(t.rating),x(t.reasoning),y(t.planForTomorrow),v(t.tags||[]),f(t.aiSummary)):(u(""),m(null),x(""),y(""),v([]),f(void 0)),S(!1),k("saved")})(),(async()=>{const e=await Y(()=>Promise.resolve().then(()=>ge),void 0).then(e=>e.getEntries());E(e.map(e=>e.date))})()},[e]);const I=o.useCallback(async()=>{k("saving");const e={id:l,date:l,timestamp:Date.now(),narrative:c,rating:h||0,reasoning:g,planForTomorrow:p,tags:w,aiSummary:b,encrypted:i};try{await de(e),setTimeout(()=>{k("saved"),t()},1e3)}catch(a){k("unsaved"),alert("Failed to save entry. Please check your connection.")}},[l,c,h,g,p,w,b,t,i]);o.useEffect(()=>{if(N)return;const e=setTimeout(()=>{(c||g||p||null!==h||w.length>0)&&I()},1500);return()=>clearTimeout(e)},[c,g,p,h,w,b,I,N]);const A=o.useCallback((e,t)=>{"journal"===t?u(t=>t+(t?" ":"")+e):"analysis"===t?x(t=>t+(t?" ":"")+e):"strategy"===t&&y(t=>t+(t?" ":"")+e),k("saving")},[]),M=o.useCallback(e=>{u(e),k("saving")},[]),P=o.useCallback(e=>{x(e),k("saving")},[]),L=o.useCallback(e=>{y(e),k("saving")},[]),H=o.useCallback(e=>{m(e),k("saving")},[]);return N?a.jsx("div",{className:"flex items-center justify-center h-64 text-apple-gray dark:text-zinc-500",children:"Loading entry..."}):a.jsxs("div",{className:"w-full pb-32 animate-fade-in @container",children:[a.jsx("div",{className:"fixed bottom-6 right-6 z-40 flex flex-col items-end gap-2 pointer-events-none",children:a.jsx("span",{className:"text-xs font-medium px-3 py-1.5 rounded-full border shadow-sm backdrop-blur-sm transition-all duration-500 "+("saving"===j?"opacity-100 translate-y-0 bg-white/90 dark:bg-zinc-800/90 dark:border-zinc-600 dark:text-white":"unsaved"===j?"opacity-100 translate-y-0 bg-red-50/90 text-red-600 border-red-100":"opacity-0 translate-y-2"),children:"saving"===j?"Saving...":"Save Failed"})}),a.jsx(Se,{date:l,setDate:d,showCalendar:W,setShowCalendar:C,entryDates:z,onToggleSidebar:r,isSidebarOpen:s,streak:n,streakStatus:D,displayStreak:T}),a.jsxs("div",{className:"mx-auto max-w-[var(--card-max-width)] px-0 md:px-[var(--space-l)] space-y-4 md:space-y-[var(--space-xl)] mt-8 md:mt-12",children:[a.jsxs("section",{className:"group animate-slide-in-from-bottom @container",style:{animationDelay:"0.2s"},children:[a.jsxs("div",{className:"flex items-center justify-between mb-[var(--space-s)]",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-[0.85rem] tracking-[2px] uppercase text-apple-gray dark:text-white/20 font-medium",children:"NARRATIVE"}),a.jsx("span",{className:"text-sm text-apple-gray/60 dark:text-white/10",children:"â€¢"}),a.jsx("span",{className:"text-sm text-apple-gray dark:text-gray-400",children:"What happened today?"})]}),a.jsx("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity mb-1",children:a.jsx(ve,{onTranscriptionComplete:e=>A(e,"journal")})})]}),a.jsx("div",{className:"bg-white/50 dark:bg-white/[0.02] rounded-xl p-3 md:p-[var(--space-m)] border border-apple-border/50 dark:border-white/5 shadow-sm backdrop-blur-sm transition-all hover:bg-white/80 dark:hover:bg-white/[0.04]",children:a.jsx(we,{value:c,onChange:M,animatedPlaceholder:We})})]}),a.jsxs("section",{className:"group animate-slide-in-from-bottom @container",style:{animationDelay:"0.3s"},children:[a.jsxs("div",{className:"flex items-center justify-between mb-[var(--space-s)]",children:[a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("span",{className:"text-[0.85rem] tracking-[2px] uppercase text-apple-gray dark:text-white/20 font-medium",children:"ANALYSIS & MOOD"})}),a.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx(ve,{onTranscriptionComplete:e=>A(e,"analysis")})})]}),a.jsxs("div",{className:"bg-white/50 dark:bg-white/[0.02] rounded-xl p-3 md:p-[var(--space-m)] border border-apple-border/50 dark:border-white/5 shadow-sm backdrop-blur-sm transition-all hover:bg-white/80 dark:hover:bg-white/[0.04]",children:[a.jsx("div",{className:"mb-[var(--space-m)]",children:a.jsx(be,{value:h,onChange:H})}),a.jsx("div",{children:a.jsxs("div",{children:[a.jsx("div",{className:"flex items-center justify-between mb-2",children:a.jsx("span",{className:"text-sm text-apple-gray dark:text-gray-400",children:"Why do you feel this way?"})}),a.jsx(we,{value:g,onChange:P,animatedPlaceholder:Ce})]})})]})]}),a.jsxs("section",{className:"group animate-slide-in-from-bottom @container",style:{animationDelay:"0.4s"},children:[a.jsxs("div",{className:"flex items-center justify-between mb-[var(--space-s)]",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-[0.85rem] tracking-[2px] uppercase text-apple-gray dark:text-white/20 font-medium",children:"STRATEGY"}),a.jsx("span",{className:"text-sm text-apple-gray/60 dark:text-white/10",children:"â€¢"}),a.jsx("span",{className:"text-sm text-apple-gray dark:text-gray-400",children:"Plan for tomorrow"})]}),a.jsx("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx(ve,{onTranscriptionComplete:e=>A(e,"strategy")})})]}),a.jsx("div",{className:"bg-white/50 dark:bg-white/[0.02] rounded-xl p-3 md:p-[var(--space-m)] border border-apple-border/50 dark:border-white/5 shadow-sm backdrop-blur-sm transition-all hover:bg-white/80 dark:hover:bg-white/[0.04]",children:a.jsx(we,{value:p,onChange:L,animatedPlaceholder:ze})})]})]})]})},De=()=>{const{loginGoogle:e,loginGuest:t,loginEmail:r,registerEmail:s,loading:n}=ye(),[i,l]=o.useState(null),[d,c]=o.useState(null),[u,h]=o.useState(!1),[m,g]=o.useState(!1),[x,p]=o.useState(!1),[y,b]=o.useState(""),[f,w]=o.useState("");o.useEffect(()=>{"localhost"!==window.location.hostname&&window.location.hostname.includes("127.0.0.1")},[]);return a.jsx("div",{className:"min-h-screen w-full flex flex-col items-center justify-center bg-apple-bg dark:bg-zinc-900 text-apple-text dark:text-white p-4 transition-colors duration-500",children:a.jsxs("div",{className:"w-full max-w-md animate-fade-in",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-24 h-24 rounded-[2rem] bg-white dark:bg-zinc-800 shadow-float mb-8 animate-zoom-in",children:a.jsx(T,{className:"w-12 h-12 text-apple-text dark:text-white"})}),a.jsx("h1",{className:"text-4xl font-bold tracking-tight mb-3 animate-slide-in-from-bottom",style:{animationDelay:"0.1s"},children:"Data Journaling"}),a.jsx("p",{className:"text-apple-gray dark:text-zinc-400 text-lg animate-slide-in-from-bottom",style:{animationDelay:"0.2s"},children:"Your life, beautifully documented."})]}),a.jsxs("div",{className:"bg-white/70 dark:bg-zinc-800/50 backdrop-blur-2xl rounded-[2.5rem] p-10 shadow-float border border-white/40 dark:border-white/5 overflow-hidden animate-slide-in-from-bottom",style:{animationDelay:"0.3s"},children:[d&&a.jsxs("div",{className:"mb-6 p-4 bg-orange-50 dark:bg-orange-900/20 border border-orange-100 dark:border-orange-800 rounded-2xl text-sm",children:[a.jsxs("div",{className:"flex items-start gap-3 text-orange-800 dark:text-orange-200 mb-3",children:[a.jsx(O,{className:"w-5 h-5 shrink-0 mt-0.5"}),a.jsx("span",{className:"font-bold",children:"Action Required: Whitelist Domain"})]}),a.jsx("p",{className:"text-orange-700 dark:text-orange-300 mb-3 leading-relaxed",children:"Google blocked the login because this preview domain is not on your Firebase safe list."}),a.jsx("div",{className:"bg-white/50 dark:bg-black/20 p-2 rounded mb-3 font-mono text-xs break-all border border-orange-200 dark:border-orange-800 text-center",children:d}),a.jsxs("button",{onClick:()=>{const e=d||window.location.hostname;navigator.clipboard.writeText(e),h(!0),setTimeout(()=>h(!1),2e3)},className:"w-full flex items-center justify-center gap-2 bg-white dark:bg-black/40 border border-orange-200 dark:border-orange-800 p-2.5 rounded-lg text-orange-800 dark:text-orange-200 font-semibold text-xs hover:bg-orange-100 dark:hover:bg-orange-900/40 transition-colors shadow-sm",children:[u?a.jsx(I,{className:"w-4 h-4"}):a.jsx(A,{className:"w-4 h-4"}),u?"Copied!":"Copy Domain"]}),a.jsxs("p",{className:"mt-3 text-[11px] text-orange-600 dark:text-orange-400 text-center",children:["Or use ",a.jsx("strong",{children:"Guest Mode"})," below to skip this."]})]}),i&&!d&&a.jsx("div",{className:"mb-6 p-3 bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-800 rounded-xl text-red-600 dark:text-red-400 text-sm font-medium text-center",children:i}),m?a.jsxs("form",{onSubmit:async e=>{var t;e.preventDefault(),l(null),c(null);try{x?await s(y,f):await r(y,f)}catch(a){if("auth/unauthorized-domain"===(null==a?void 0:a.code)||(null==(t=null==a?void 0:a.message)?void 0:t.includes("unauthorized-domain")))return void c(window.location.hostname);l((null==a?void 0:a.message)||"Authentication failed.")}},className:"space-y-5 animate-slide-in-from-right",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-zinc-400 mb-2 uppercase tracking-wider",children:"Email Address"}),a.jsx("input",{type:"email",required:!0,value:y,onChange:e=>b(e.target.value),className:"w-full px-4 py-3.5 rounded-2xl bg-gray-50 dark:bg-zinc-900/50 border border-gray-200 dark:border-zinc-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all",placeholder:"you@example.com"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-bold text-gray-500 dark:text-zinc-400 mb-2 uppercase tracking-wider",children:"Password"}),a.jsx("input",{type:"password",required:!0,value:f,onChange:e=>w(e.target.value),className:"w-full px-4 py-3.5 rounded-2xl bg-gray-50 dark:bg-zinc-900/50 border border-gray-200 dark:border-zinc-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none transition-all",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",minLength:6})]}),a.jsx("button",{type:"submit",disabled:n,className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-4 rounded-2xl shadow-lg shadow-blue-200 dark:shadow-none transition-all active:scale-[0.98]",children:n?"Processing...":x?"Create Account":"Sign In"}),a.jsxs("div",{className:"flex items-center justify-between text-sm pt-2",children:[a.jsx("button",{type:"button",onClick:()=>g(!1),className:"text-gray-500 hover:text-gray-800 dark:hover:text-gray-300 font-medium",children:"Back"}),a.jsx("button",{type:"button",onClick:()=>p(!x),className:"text-blue-600 hover:underline font-medium",children:x?"Already have an account?":"Create an account"})]})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsx("button",{onClick:async()=>{var t;try{l(null),c(null),await e()}catch(a){if("auth/unauthorized-domain"===(null==a?void 0:a.code)||(null==(t=null==a?void 0:a.message)?void 0:t.includes("unauthorized-domain"))||String(a).includes("auth/unauthorized-domain"))return void c(window.location.hostname);if("auth/popup-closed-by-user"===(null==a?void 0:a.code))return void l("Sign-in cancelled.");l((null==a?void 0:a.message)||"Unable to sign in with Google.")}},disabled:n,className:"w-full flex items-center justify-center gap-3 bg-apple-text dark:bg-white text-white dark:text-black font-semibold py-4 rounded-2xl transition-transform active:scale-[0.98] hover:shadow-lg disabled:opacity-70",children:n?"Connecting...":a.jsxs(a.Fragment,{children:[a.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[a.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),a.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),a.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.84z"}),a.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),a.jsx("span",{children:"Continue with Google"})]})}),a.jsxs("button",{onClick:()=>g(!0),className:"w-full flex items-center justify-center gap-2 bg-white dark:bg-zinc-800 border border-gray-200 dark:border-zinc-700 text-apple-text dark:text-white font-medium py-4 rounded-2xl hover:bg-gray-50 dark:hover:bg-zinc-700 transition-colors",children:[a.jsx(M,{className:"w-5 h-5"}),a.jsx("span",{children:"Continue with Email"})]}),a.jsxs("div",{className:"relative py-3",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("div",{className:"w-full border-t border-gray-200 dark:border-zinc-700"})}),a.jsx("div",{className:"relative flex justify-center",children:a.jsx("span",{className:"bg-transparent px-2 text-xs text-gray-400 uppercase tracking-wider font-semibold",children:"Or"})})]}),a.jsxs("button",{onClick:t,className:"w-full flex items-center justify-center gap-2 bg-gray-100 dark:bg-zinc-700/50 text-apple-text dark:text-white font-medium py-4 rounded-2xl hover:bg-gray-200 dark:hover:bg-zinc-600 transition-colors group",children:[a.jsx("span",{children:"Continue as Guest"}),a.jsx(P,{className:"w-4 h-4 opacity-50 group-hover:translate-x-1 transition-transform"})]})]}),a.jsxs("div",{className:"mt-10 flex items-center justify-center gap-2 text-[10px] text-gray-400 dark:text-zinc-500 uppercase tracking-wide font-medium",children:[a.jsx(L,{className:"w-3 h-3"}),a.jsx("span",{children:"Guest data encrypted locally."})]})]})]})})};class _e extends o.Component{constructor(){super(...arguments),t(this,"state",{hasError:!1,error:null})}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){}render(){var e;return this.state.hasError?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-red-50 p-4",children:a.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-xl max-w-md w-full border border-red-100",children:[a.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Something went wrong"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"The application encountered an unexpected error."}),a.jsx("div",{className:"bg-gray-100 p-4 rounded text-sm font-mono text-red-800 mb-6 overflow-auto max-h-40",children:(null==(e=this.state.error)?void 0:e.message)||"Unknown error"}),a.jsx("button",{onClick:()=>window.location.reload(),className:"w-full bg-red-600 text-white py-2 px-4 rounded hover:bg-red-700 transition-colors",children:"Reload Application"})]})}):this.props.children}}const Te=({icon:e,label:t,active:r,onClick:s,collapsed:n=!1})=>a.jsxs("button",{onClick:s,className:`\n      w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-all duration-200 group\n      ${r?"bg-black/5 dark:bg-white/10 text-gray-900 dark:text-white font-medium":"text-gray-500 dark:text-gray-400 hover:bg-black/5 dark:hover:bg-white/5 hover:text-gray-900 dark:hover:text-gray-200"}\n      ${n?"justify-center px-0":""}\n    `,title:n?t:void 0,children:[a.jsx(e,{size:20,className:"transition-colors "+(r?"text-gray-900 dark:text-white":"group-hover:text-gray-900 dark:group-hover:text-gray-200")}),!n&&a.jsx("span",{className:"truncate text-sm",children:t})]}),Oe=({isOpen:e,onToggle:t,currentView:n,onViewChange:i,user:l,onOpenSettings:d,isMobile:c,isTablet:u})=>{const{logout:h,usage:m,isPro:g}=ye(),x=m,p=o.useCallback(e=>{i(e),c&&t()},[i,c,t]),y=o.useCallback(()=>{d(),c&&t()},[d,c,t]),b=({collapsed:e=!1})=>{var t,r;return a.jsxs("div",{className:"flex flex-col h-full bg-apple-bg/95 dark:bg-[#1c1c1e]/95 backdrop-blur-xl border-r border-black/5 dark:border-white/5",children:[a.jsxs("div",{className:`flex items-center ${e?"justify-center p-4":"px-4 py-5 gap-3"} mb-2`,children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white text-xs font-bold shadow-sm flex-shrink-0",children:(null==l?void 0:l.photoURL)?a.jsx("img",{src:l.photoURL,alt:"Profile",className:"w-full h-full rounded-full object-cover"}):(null==(r=null==(t=null==l?void 0:l.displayName)?void 0:t[0])?void 0:r.toUpperCase())||"M"}),!e&&a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-900 dark:text-white truncate",children:(null==l?void 0:l.displayName)||"Journaler"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:"Explorer Pass"})]})]}),!g&&!e&&x&&a.jsxs("div",{onClick:y,className:"mx-3 mb-2 p-3 bg-gradient-to-br from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 border border-purple-200 dark:border-purple-700 rounded-xl cursor-pointer hover:shadow-md transition-shadow",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(H,{className:"w-4 h-4 text-purple-600 dark:text-purple-400"}),a.jsx("span",{className:"text-xs font-semibold text-gray-700 dark:text-gray-200",children:"Voice Journaling"})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("div",{className:"flex items-center justify-between text-xs",children:[a.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[Math.floor(x.transcriptionSeconds/60)," of 15 min used"]}),a.jsxs("span",{className:"text-gray-500 dark:text-gray-400 font-medium",children:[Math.round(x.transcriptionSeconds/900*100),"%"]})]}),a.jsx("div",{className:"w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full rounded-full transition-all duration-300 "+(x.transcriptionSeconds/900>=.8?"bg-gradient-to-r from-orange-500 to-red-500":"bg-gradient-to-r from-purple-500 to-blue-500"),style:{width:`${Math.min(x.transcriptionSeconds/900*100,100)}%`}})}),x.transcriptionSeconds/900>=.8&&a.jsx("p",{className:"text-[10px] text-orange-600 dark:text-orange-400 font-medium mt-1",children:"Loving it? Unlock unlimited â†’"})]})]}),a.jsxs("div",{className:"flex-1 px-3 space-y-1 overflow-y-auto no-scrollbar",children:[a.jsx(Te,{icon:R,label:"Journal",active:"journal"===n,onClick:()=>p("journal"),collapsed:e}),a.jsx(Te,{icon:U,label:"History",active:"history"===n,onClick:()=>p("history"),collapsed:e})]}),a.jsxs("div",{className:"p-3 mt-auto border-t border-black/5 dark:border-white/5 space-y-1",children:[a.jsx(Te,{icon:$,label:"Settings",onClick:y,collapsed:e}),a.jsx(Te,{icon:G,label:"Sign Out",onClick:h,collapsed:e})]})]})};if(c)return a.jsx(r,{children:e&&a.jsxs(a.Fragment,{children:[a.jsx(s.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:t,className:"fixed inset-0 bg-black/50 z-40 backdrop-blur-[2px]"}),a.jsx(s.aside,{initial:{x:"-100%"},animate:{x:0},exit:{x:"-100%"},transition:{type:"spring",damping:25,stiffness:200},className:"fixed top-0 left-0 bottom-0 w-auto min-w-[220px] max-w-[50vw] z-50 shadow-2xl",children:a.jsx(b,{})})]})});const f=u?e?240:72:260;return a.jsx(s.aside,{initial:!1,animate:{width:f},transition:{type:"spring",stiffness:300,damping:30},className:"fixed top-0 left-0 bottom-0 z-30 overflow-hidden border-r border-black/5 dark:border-white/5 bg-apple-bg dark:bg-[#1c1c1e]",children:a.jsx(b,{collapsed:u&&!e})})},Ie=i.lazy(()=>Y(()=>import("./HistoryDashboard-BdCz2DXq.js"),__vite__mapDeps([5,2,3,4,1]))),Ae=i.lazy(()=>Y(()=>import("./SettingsModal-DUMjVEjK.js"),__vite__mapDeps([6,2,3,0,1,4]))),Me=i.lazy(()=>Y(()=>import("./ContactModal-CnuzhtX0.js"),__vite__mapDeps([7,2,3,4]))),Pe=()=>{const{user:e,isGuest:t,loading:r,isPro:s,usage:n}=ye(),[i,l]=o.useState("journal"),[d,c]=o.useState(null),[u,h]=o.useState(0),[m,g]=o.useState(!1),[x,p]=o.useState(!1),[y,b]=o.useState(!1),[f,w]=o.useState(window.innerWidth<600),[v,j]=o.useState(window.innerWidth>=600&&window.innerWidth<1024),[k,N]=o.useState(!0);o.useEffect(()=>{const e=()=>{const e=window.innerWidth,t=e<600,a=e>=600&&e<1024;w(t),j(a),N(!t&&!a)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),o.useEffect(()=>{(async()=>{if(e||t){await le();const e=await me();h(e),g(!0)}})()},[e,t]),o.useEffect(()=>{m&&S()},[i,m]);const S=async()=>{const e=await me();h(e)};return r?a.jsx("div",{className:"h-screen w-full flex items-center justify-center bg-apple-bg dark:bg-zinc-900 text-apple-gray",children:"Loading..."}):e||t?m?a.jsxs("div",{className:"h-screen w-full flex bg-apple-bg dark:bg-zinc-900 transition-colors duration-500 overflow-hidden",children:[a.jsxs(o.Suspense,{fallback:null,children:[a.jsx(Ae,{isOpen:x,onClose:()=>p(!1),onContact:()=>b(!0)}),a.jsx(Me,{isOpen:y,onClose:()=>b(!1)})]}),a.jsx(Oe,{isOpen:k,onToggle:()=>N(!k),currentView:i,onViewChange:e=>{l(e),c(null)},user:e,streak:u,onOpenSettings:()=>p(!0),isMobile:f,isTablet:v,isPro:s,usage:n?{count:n.transcriptionSeconds,limit:900}:void 0}),a.jsx("div",{className:`\n          flex-1 h-full relative transition-all duration-300 ease-in-out\n          ${f?"ml-0 w-full":""}\n          ${!f&&v?k?"ml-[240px]":"ml-[72px]":""}\n          ${f||v?"":"ml-[260px]"}\n        `,children:a.jsx("main",{className:"h-full overflow-y-auto no-scrollbar scroll-smooth pb-safe-bottom",children:a.jsx("div",{className:"max-w-5xl mx-auto px-3 md:px-8 py-3 md:py-6 min-h-full",children:"journal"===i?a.jsx(Ee,{initialDate:d||(new Date).toISOString().split("T")[0],onSave:S,onUpgrade:()=>{},onToggleSidebar:f||v?()=>N(!k):void 0,isSidebarOpen:k,streak:u}):a.jsx(o.Suspense,{fallback:a.jsx("div",{className:"p-10 text-center text-gray-400",children:"Loading Index..."}),children:a.jsx(Ie,{onEditEntry:e=>{c(e),l("journal")}})})})})})]}):a.jsx("div",{className:"h-screen w-full flex items-center justify-center bg-apple-bg dark:bg-zinc-900",children:a.jsx("div",{className:"text-apple-gray text-sm font-medium animate-pulse",children:"Synchronizing Journal..."})}):a.jsx(De,{})};function Le(){return a.jsx(_e,{children:a.jsx(pe,{children:a.jsx(Pe,{})})})}const He=document.getElementById("root");if(!He)throw new Error("Could not find root element to mount to");J.createRoot(He).render(a.jsx(i.StrictMode,{children:a.jsx(Le,{})}));export{Y as _,X as a,te as b,he as d,ue as g,ye as u};
