import{j as e}from"./animation-vendor-BD8Aa5RZ.js";import{r as t}from"./react-vendor-DtX1tuCI.js";import{g as r,d as a}from"./index-B9zpdIYq.js";import{h as s,s as n,t as l,u as i,e as d}from"./icons-vendor-DZrg139Q.js";import"./firebase-vendor-BCiydsH2.js";const o=({onEditEntry:o})=>{const[c,x]=t.useState([]),[m,g]=t.useState([]),[p,u]=t.useState(""),[h,b]=t.useState(!0),[f,j]=t.useState(null);t.useEffect(()=>{(async()=>{b(!0);const e=await r();x(e),g(e),b(!1)})()},[]),t.useEffect(()=>{if(!p)return void g(c);const e=p.toLowerCase(),t=c.filter(t=>{var r;return t.narrative.toLowerCase().includes(e)||t.planForTomorrow.toLowerCase().includes(e)||(null==(r=t.tags)?void 0:r.some(t=>t.toLowerCase().includes(e)))});g(t)},[p,c]);const v=e=>{const t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||"No content"};return h?e.jsx("div",{className:"flex items-center justify-center py-20 text-apple-gray dark:text-zinc-500 animate-pulse",children:"Accessing Secure Index..."}):e.jsxs("div",{className:"animate-fade-in pb-20 relative text-apple-text dark:text-white",children:[f&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/20 backdrop-blur-sm",children:e.jsx("div",{className:"bg-white dark:bg-zinc-800 rounded-2xl shadow-2xl max-w-sm w-full p-6 border border-gray-100 dark:border-zinc-700",children:e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-red-50 dark:bg-red-900/20 rounded-full flex items-center justify-center mb-4",children:e.jsx(s,{className:"w-6 h-6 text-red-500"})}),e.jsx("h3",{className:"text-lg font-bold mb-2",children:"Delete Entry?"}),e.jsxs("p",{className:"text-sm text-apple-gray dark:text-zinc-400 mb-6",children:["Are you sure you want to delete the entry for ",e.jsx("span",{className:"font-semibold",children:f.date}),"?"]}),e.jsxs("div",{className:"flex w-full gap-3",children:[e.jsx("button",{onClick:()=>j(null),className:"flex-1 px-4 py-2.5 bg-gray-100 dark:bg-zinc-700 hover:bg-gray-200 dark:hover:bg-zinc-600 text-sm font-medium rounded-xl transition-colors",children:"Cancel"}),e.jsx("button",{onClick:async()=>{if(f){await a(f.date);const e=c.filter(e=>e.date!==f.date);x(e),g(e.filter(e=>!p||e.narrative.toLowerCase().includes(p.toLowerCase()))),j(null)}},className:"flex-1 px-4 py-2.5 bg-red-500 hover:bg-red-600 text-white text-sm font-medium rounded-xl shadow-lg shadow-red-200 dark:shadow-none",children:"Delete"})]})]})})}),e.jsxs("div",{className:"flex items-end justify-between mb-8 pb-4 border-b border-gray-200/60 dark:border-white/10",children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Index"}),e.jsxs("div",{className:"relative w-full max-w-xs group",children:[e.jsx(n,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search...",value:p,onChange:e=>u(e.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-50/50 dark:bg-zinc-800/50 border border-transparent focus:bg-white dark:focus:bg-zinc-800 rounded-lg text-sm outline-none transition-all"})]})]}),e.jsx("div",{className:"space-y-3",children:0===m.length?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-gray-50 dark:bg-zinc-800 mb-3",children:e.jsx(l,{className:"w-6 h-6 text-gray-300 dark:text-zinc-600"})}),e.jsx("p",{className:"text-apple-gray dark:text-zinc-500 italic text-sm",children:"No entries found."})]}):m.map(t=>{var r;return e.jsxs("div",{onClick:()=>o(t.date),className:"group bg-white dark:bg-zinc-900 border border-transparent dark:border-zinc-800 hover:border-gray-200 dark:hover:border-zinc-700 hover:shadow-apple rounded-2xl p-4 cursor-pointer transition-all duration-300 flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start flex-1 min-w-0 mr-4",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center w-12 h-14 bg-gray-50/80 dark:bg-zinc-800 rounded-xl text-apple-gray dark:text-zinc-400 mr-4 group-hover:bg-blue-50 dark:group-hover:bg-blue-900/20 group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors shrink-0",children:[e.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wide",children:new Date(t.date).toLocaleDateString("en-US",{month:"short"})}),e.jsx("span",{className:"text-xl font-bold leading-none mt-0.5",children:new Date(t.date).getDate()})]}),e.jsxs("div",{className:"flex-1 min-w-0 pt-0.5",children:[e.jsx("div",{className:"mb-1.5",children:e.jsx("span",{className:"font-medium text-apple-text dark:text-gray-200 block truncate text-base",children:v(t.narrative)})}),e.jsxs("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-1 text-xs text-apple-gray dark:text-zinc-500",children:[e.jsxs("span",{className:"font-semibold flex items-center gap-1 "+(t.rating>0?"text-green-600 dark:text-green-400":t.rating<0?"text-red-500 dark:text-red-400":""),children:["Rating: ",t.rating>0?"+":"",t.rating]}),(null==(r=t.tags)?void 0:r.length)>0&&e.jsx("span",{className:"flex gap-1",children:t.tags.slice(0,3).map(t=>e.jsxs("span",{className:"bg-gray-100 dark:bg-zinc-800 px-1.5 py-0.5 rounded text-[10px] text-gray-600 dark:text-gray-400",children:["#",t]},t))})]})]})]}),e.jsxs("div",{className:"flex items-center gap-1 shrink-0 pt-3",children:[e.jsx("button",{onClick:e=>((e,t)=>{e.stopPropagation(),j(t)})(e,t),className:"p-2 text-gray-300 dark:text-zinc-600 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-full opacity-0 group-hover:opacity-100 transition-all",children:e.jsx(i,{className:"w-4 h-4"})}),e.jsx(d,{className:"w-5 h-5 text-gray-300 dark:text-zinc-600 group-hover:text-blue-500 transition-colors opacity-50 group-hover:opacity-100"})]})]},t.date)})})]})};export{o as default};
