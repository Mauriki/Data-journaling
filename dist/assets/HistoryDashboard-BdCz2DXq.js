import{j as e}from"./animation-vendor-BD8Aa5RZ.js";import{r as t}from"./react-vendor-DtX1tuCI.js";import{g as r,d as a}from"./index-lp4wKaf9.js";import{T as s}from"./icons-vendor-BBBaSOmN.js";import"./firebase-vendor-B4z9b8il.js";const n=({onEditEntry:n})=>{const[i,d]=t.useState([]),[o,l]=t.useState(!0);t.useEffect(()=>{c()},[]);const c=async()=>{try{const e=await r();d(e)}catch(e){}finally{l(!1)}};return o?e.jsx("div",{className:"text-center text-gray-500 mt-10",children:"Loading history..."}):e.jsxs("div",{className:"space-y-6 animate-fade-in pb-20",children:[e.jsxs("header",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"History"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"Your past journal entries"})]}),e.jsx("div",{className:"grid gap-4",children:0===i.length?e.jsx("div",{className:"text-center py-10 bg-white dark:bg-zinc-800 rounded-2xl shadow-sm border border-gray-100 dark:border-zinc-700",children:e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No entries yet. Start journaling!"})}):i.map(t=>e.jsxs("div",{onClick:()=>n(t.date),className:"group relative bg-white dark:bg-zinc-800 p-5 rounded-2xl shadow-sm hover:shadow-md transition-all cursor-pointer border border-gray-100 dark:border-zinc-700 hover:border-blue-500/30",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:new Date(t.date).toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),e.jsx("div",{className:"flex items-center gap-2 mt-1",children:e.jsxs("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium "+(t.rating>0?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":t.rating<0?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400":"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-400"),children:["Rating: ",t.rating]})})]}),e.jsx("button",{onClick:e=>(async(e,t)=>{e.stopPropagation(),confirm("Are you sure you want to delete this entry?")&&(await a(t),c())})(e,t.date),className:"opacity-0 group-hover:opacity-100 p-2 text-gray-400 hover:text-red-500 transition-opacity",title:"Delete Entry",children:e.jsx(s,{size:18})})]}),e.jsx("div",{className:"mt-3 text-gray-600 dark:text-gray-300 line-clamp-2 text-sm",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:t.narrative||t.reasoning||"No content"}})})]},t.date))})]})};export{n as default};
